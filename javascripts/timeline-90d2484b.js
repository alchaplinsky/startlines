(function(){window.Timeline=function(){function t(t,i){this.color=i,this.el=$(".timeline .container"),this.dates=_.map(t,function(t){return moment(t.date)}),this.start_date=_.first(this.dates),this.end_date=moment(),this.scale=this.end_date.diff(this.start_date)/(this.el.width()-15),this.initMobileBehavior(),this.initSlides(),this.initTimeline(),this.initEvents()}return t.prototype.initSlides=function(){return this.slides=new Slides},t.prototype.initEvents=function(){return $(document).on("click",".marker",function(t){return function(i){return t.slides.deck.slide(t.el.find(".marker").index(i.currentTarget))}}(this)),this.slides.deck.on("activate",function(t){return function(i){return t.markers.removeClass("current"),$(t.markers[i.index]).addClass("current")}}(this)),$(window).on("resize",function(t){return function(){return t.initMobileBehavior()}}(this))},t.prototype.initMobileBehavior=function(){var t;return $(window).width()<=840?(t=$("section").outerWidth()/2,$("section").css("margin-left","-"+t+"px")):void 0},t.prototype.initTimeline=function(){return this.el.attr("data-start",this.start_date.format("DD MMM, YYYY")),this.el.attr("data-end",this.end_date.format("DD MMM, YYYY")),_.each(this.dates,function(t){return function(i){var e;return e=$("<div class='marker' data-date='"+i.format("DD MMM, YYYY")+"' style='background: "+t.color+"'></div>"),t.setPosition(e,i),t.el.append(e)}}(this)),this.markers=$(".timeline .marker"),this.markers.first().addClass("current")},t.prototype.setPosition=function(t,i){var e;return e=i.diff(this.start_date)/this.scale,t.css("left",e)},t}()}).call(this);