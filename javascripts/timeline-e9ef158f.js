(function(){window.Timeline=function(){function t(t,e){this.color=e,this.el=$(".timeline .container"),this.dates=_.map(t,function(t){return moment(t.date)}),this.start_date=_.first(this.dates),this.end_date=moment(),this.scale=this.end_date.diff(this.start_date)/(this.el.width()-15),this.initSlides(),this.initTimeline(),this.initEvents()}return t.prototype.initSlides=function(){return this.slides=new Slides},t.prototype.initEvents=function(){return $(document).on("click",".marker",function(t){return function(e){return t.slides.deck.slide(t.el.find(".marker").index(e.currentTarget))}}(this)),this.slides.deck.on("activate",function(t){return function(e){return t.markers.removeClass("current"),$(t.markers[e.index]).addClass("current")}}(this))},t.prototype.initTimeline=function(){return this.el.attr("data-start",this.start_date.format("DD MMM, YYYY")),this.el.attr("data-end",this.end_date.format("DD MMM, YYYY")),_.each(this.dates,function(t){return function(e){var i;return i=$("<div class='marker' data-date='"+e.format("DD MMM, YYYY")+"' style='background: "+t.color+"'></div>"),t.setPosition(i,e),t.el.append(i)}}(this)),this.markers=$(".timeline .marker"),this.markers.first().addClass("current")},t.prototype.setPosition=function(t,e){var i;return i=e.diff(this.start_date)/this.scale,t.css("left",i)},t}()}).call(this);